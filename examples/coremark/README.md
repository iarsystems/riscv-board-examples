# CoreMark 1.0 

* Target: IAR RISC-V GD32V Evaluation Board

## Introduction

CoreMark is an industry-standard benchmarking program widely used for measuring performance of central processing units (CPUs) used in embedded systems. It was developed in 2009 by Shay Gal-On at [EEMBC](https://www.eembc.org).

The code is written in C and contains implementations of the following algorithms: 
- list processing (find and sort)
- matrix manipulation (common matrix operations)
- state machine (determine if an input stream contains valid numbers), and 
- CRC.

Running the code __optimized for maximum speed__ on a target CPU will result in a certain CoreMark score. For the IAR C/C++ Compiler, this means compiling with the `-Ohs --no_size_constraints` options. The higher the CoreMark score, the better the compiler's optimizations.

Refer to [CoreMark's README](https://github.com/eembc/coremark/blob/6a46772f09492d8e728021b9dc1591a20edfb02a/README.md) for more information.

## Running
The program will execute for about 10 seconds and once it finishes, it will print out the __Coremark score__ for your RISC-V Evaluation Board running the code generated by the IAR C/C++ Compiler for RISC-V. An example of the expected output can be seen below:

~~~
2K performance run parameters for coremark.                                      (Run type)
CoreMark Size    : 666                                                           (Buffer size)
Total ticks      : 1184262414                                                    (platform dependent value)
Total time (secs): 10.965393                                                     (actual time in seconds)
Iterations/Sec   : 373.538833                                                    (Performance value to report)
Iterations       : 4096                                                          (number of iterations used)
Compiler version : IAR C/C++ Compiler V3.10.1.1873/W64 for RISC-V                (Compiler and version)	
Compiler flags   : -Ohs --no_size_constraints --no_cross_call --core=RV32IMAC    (Compiler and linker flags)
Memory location  : Code in flash, data on chip RAM                           
seedcrc          : 0xe9f5                                                        (identifier for the input seeds)
[0]crclist       : 0xe714                                                        (validation for list part)
[0]crcmatrix     : 0x1fd7                                                        (validation for matrix part)
[0]crcstate      : 0x8e3a                                                        (validation for state part)
[0]crcfinal      : 0x7b65                                                        (iteration dependent output)
Correct operation validated. See README.md for run and reporting rules.          (*Only when run is successful*)
CoreMark 1.0 : 373.538833 / IAR C/C++ Compiler V3.10.1.1873/W64 for RISC-V...    (*Only on a successful performance run*)
~~~

## Notes
* According to the CoreMark [rules](#run-rules), the source files named `core*` cannot be touched. The only exception to that rule are the __core_portme__ files.
* A typical way to compare the scores from different cores/compilers combinations is to rate them by __CoreMark/MHz__.
* If you wish to know how many CoreMark/MHz your board got, do the math! It is as easy as taking the *CoreMark score* and dividing it by 108 MHz.

